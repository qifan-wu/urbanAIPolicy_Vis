<!DOCTYPE html>
<html>
<head>
    <title>Select Category</title>
</head>
<body>
    <h2>Select a category</h2>
    <form id="category-form" action="/" method="get" onsubmit="return redirectToCategory();">
        <label for="category">Choose a category:</label>

        <select id="category" name="subcategory">
            {% for option in all_categories %}
                <option value="{{ option }}">{{ option }}</option>
            {% endfor %}
        </select>

        <script>
            document.getElementById("category").addEventListener("change", function() {
                const selected = this.value;
                if (selected) {
                    window.location.href = "/" + encodeURIComponent(selected);
                }
            });
        </script>
    </form>

    <!-- <script>
        function redirectToCategory() {
            const selected = document.getElementById("category").value;
            if (selected) {
                window.location.href = "/" + encodeURIComponent(selected);
            }
            return false; // prevent default form submission
        }
    </script> -->
</body>
</html>
